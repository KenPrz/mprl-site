import{s as j,T as F,r as I,o as V,d,e as c,f as a,u as i,Z as B,i as m,g as e,k as z,t as f,v as h,L as A,F as g,m as v,x as D,j as M}from"./app-DBlbD3Xe.js";import{_ as N}from"./AuthenticatedLayout-BCIr6F-9.js";import{_ as p}from"./InputError-Ld1BlpXP.js";import{u as T}from"./useFileSizeCheck-BL_QHxWQ.js";import"./ApplicationLogo-BM8s6loa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Dropdown-B2wAxoB0.js";const U=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Services",-1),$={class:"py-12"},E={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-5"},L={class:"flex justify-start"},q=e("i",{class:"fa-solid fa-arrow-left mr-2"},null,-1),P=e("span",null,"Go Back",-1),R={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg flex flex-col"},G={class:"w-full bg-white rounded-md p-4 shadow-md space-y-2"},O={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},W={class:"col-span-1"},Z=e("label",{for:"form-name",class:"block text-lg font-medium text-gray-700"},"Service Name",-1),H={class:"col-span-1"},J=e("label",{for:"form-category",class:"block text-lg font-medium text-gray-700"},"Select Category",-1),K=e("option",{disabled:""},"Category",-1),Q=["value"],X={class:"grid grid-cols-1 sm:grid-cols-1 gap-4"},Y={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ee={class:"col-span-1 mt-3"},se=e("label",{for:"prod-name",class:"block text-lg font-medium text-gray-700"},"Description",-1),te={class:"col-span-1"},oe={class:"flex justify-between"},re=e("label",{for:"prod-name",class:"block text-lg font-medium text-gray-700 p-3"},[M("Service Image "),e("span",{class:"text-xs"},"(1 image max)")],-1),ie={class:"flex justify-between items-center mt-2"},ae={class:"bg-main-500 px-2 py-2 rounded-lg text-white hover:bg-main-600"},le=e("label",{for:"file-upload",class:"flex cursor-pointer"},[e("i",{class:"fa-solid fa-plus text-xl"}),e("span",{class:"ml-1 hidden sm:flex items-center"},"Add Images")],-1),ne={class:"bg-gray-300 rounded-lg w-full h-56 mt-2 flex items-center justify-center overflow-hidden"},de={class:"flex space-x-2"},ce=["src"],ue=["onClick"],me=e("i",{class:"fa-solid fa-times"},null,-1),fe=[me],ye={__name:"Create",props:{services:{type:Object},categories:{type:Array,required:!0}},setup(x){const u=j(),{checkFileSize:b}=T(1.5),y=x,s=F({name:"",category_id:"",description:"",image:[]});function w(){s.post(route("admin.services.store"),{preserveScroll:!0,onSuccess:()=>{u.success("Service added successfully!"),s.reset(),l.value=[]},onError:r=>{u.error("Failed to add service. Please check the form and try again."),console.error(r)}})}const l=I([]);function k(r){const t=r.target.files;if(t.length>0){const o=t[0];if(b(o)){l.value=[],s.image=[];const n=new FileReader;n.onload=_=>{l.value.push(_.target.result),s.image.push(o)},n.readAsDataURL(o)}else u.error(`File "${o.name}" exceeds the 1.5 MB size limit.`)}}function S(r){l.value.splice(r,1),s.image.splice(r,1),u.info("Image removed.")}function C(){const r=s.description.split(`
`);for(let t=0;t<r.length;t++)r[t]&&!r[t].startsWith("• ")&&(r[t]="• "+r[t]);s.description=r.join(`
`)}return V(()=>{s.clearErrors()}),(r,t)=>(d(),c(g,null,[a(i(B),{title:"Admin: Services"}),a(N,null,{header:m(()=>[U]),default:m(()=>[e("div",$,[e("div",E,[e("div",L,[a(i(z),{class:"bg-main-500 px-4 py-2 rounded-md text-white hover:bg-main-600",href:r.route("admin.services.index")},{default:m(()=>[q,P]),_:1},8,["href"])]),e("div",R,[e("div",G,[e("div",O,[e("div",W,[Z,f(e("input",{id:"form-name",class:"w-full mt-1 p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":t[0]||(t[0]=o=>i(s).name=o),type:"text",required:""},null,512),[[h,i(s).name]]),a(p,{class:"mt-2",message:i(s).errors.name},null,8,["message"])]),e("div",H,[J,f(e("select",{id:"category",class:"w-full mt-1 p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":t[1]||(t[1]=o=>i(s).category_id=o)},[K,(d(!0),c(g,null,v(y.categories,o=>(d(),c("option",{key:o.id,value:o.id},D(o.service_category),9,Q))),128))],512),[[A,i(s).category_id]]),a(p,{class:"mt-2",message:i(s).errors.category_id},null,8,["message"])])]),e("div",X,[e("div",Y,[e("div",ee,[se,f(e("textarea",{class:"mt-1 w-full h-60 p-5 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none","onUpdate:modelValue":t[2]||(t[2]=o=>i(s).description=o),onInput:C},null,544),[[h,i(s).description]]),a(p,{class:"mt-2",message:i(s).errors.description},null,8,["message"])]),e("div",te,[e("div",oe,[re,e("div",ie,[e("div",ae,[e("input",{type:"file",multiple:"",onChange:k,class:"hidden",id:"file-upload"},null,32),le])])]),e("div",ne,[e("div",de,[(d(!0),c(g,null,v(l.value,(o,n)=>(d(),c("div",{key:n,class:"relative"},[e("img",{src:o,class:"w-32 h-32 object-cover rounded-lg"},null,8,ce),e("button",{onClick:_=>S(n),class:"absolute top-0 right-0 h-8 w-8 bg-red-500 text-white rounded-full p-1 transform translate-x-1/2 -translate-y-1/2"},fe,8,ue)]))),128))])])])]),e("div",{class:"flex justify-end"},[e("button",{type:"submit",placeholder:"",class:"bg-main-500 p-3 text-white rounded-lg hover:bg-main-600",onClick:w},"Create")])])])])])])]),_:1})],64))}};export{ye as default};
