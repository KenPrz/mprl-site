import{s as A,r as i,K as x,T as w,w as y,d as n,e as d,f as h,u as o,Z as E,i as k,g as e,j as m,x as r,E as O,t as M,L as B,F as _,m as D}from"./app-DBlbD3Xe.js";import{_ as $}from"./AuthenticatedLayout-BCIr6F-9.js";import q from"./VisitorChart-CoLIrquF.js";import"./ApplicationLogo-BM8s6loa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Dropdown-B2wAxoB0.js";const H=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Dashboard",-1),I={class:"py-12"},K={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},R={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg px-5 py-6"},W={class:"font-semibold"},X={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6"},Z={class:"bg-white overflow-hidden shadow-md sm:rounded-lg p-6"},G=e("h3",{class:"text-lg font-semibold"},"Blog Posts",-1),J={class:"mt-4 text-2xl"},Q=["href"],ee={class:"bg-white overflow-hidden shadow-md sm:rounded-lg p-6"},te=e("h3",{class:"text-lg font-semibold"},"Products",-1),se={class:"mt-4 text-2xl"},oe=e("a",{class:"text-right text-xs text-blue-400 hover:underline",href:"#"},"Visit Products",-1),le={class:"bg-white overflow-hidden shadow-md sm:rounded-lg p-6"},re=e("h3",{class:"text-lg font-semibold"},"Users",-1),ie={class:"mt-4 text-2xl"},ne=["href"],de={class:"my-5 bg-white shadow-sm sm:rounded-lg p-6"},ae=e("h3",{class:"text-lg font-semibold mb-4"},"Brochure",-1),ce=["href"],ue={class:"flex items-center justify-center w-full"},he={key:0,for:"dropzone-file",class:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100"},me=e("div",{class:"flex flex-col items-center justify-center pt-5 pb-6"},[e("svg",{class:"w-10 h-10 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),e("p",{class:"mb-2 text-sm text-gray-500"},[e("span",{class:"font-semibold"},"Click to upload")]),e("p",{class:"text-xs text-gray-500"},"PDF (MAX. 100MB)")],-1),_e={key:1,class:"w-full"},fe={class:"flex items-center justify-between p-4 border border-gray-300 rounded-lg"},pe={class:"flex items-center"},ge=e("svg",{class:"w-8 h-8 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),be={class:"text-sm text-gray-500"},ve=["disabled"],xe={class:"mt-4 text-right"},we=["disabled"],ye={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg px-5 py-6 mt-6"},ke={class:"flex justify-between"},Me={class:"flex flex-col"},Be=e("h1",{class:"font-semibold text-lg"}," Visitors Overview ",-1),De={class:"mt-4 text-sm"},Se={key:0},Ye={key:1},Ve={class:"font-semibold"},je=e("label",{for:"year",class:"block text-sm font-medium text-gray-700"},"Year",-1),Pe=e("option",{value:"",disabled:""},"Select Year",-1),Fe=["value"],Le=e("label",{for:"month",class:"block text-sm font-medium text-gray-700 mt-4"},"Month",-1),Ne=["disabled"],Ue=e("option",{value:"",disabled:""},"Select Month",-1),Ce=["value"],Te={class:"mt-6"},Ie={__name:"Dashboard",props:{blog_posts:{type:Number,default:0},products:{type:Number,default:0},users:{type:Number,default:0},visitors:{type:Object,default:()=>({visitor_data:[],visitor_dates:{},selected_month:"",selected_year:""})}},setup(S){const f=A(),a=S,Y=i(a.visitors.selected_year),V=i(a.visitors.selected_month),p=i(new Date().toLocaleString("default",{month:"long"})),j=i(a.blog_posts),P=i(a.products),F=i(a.users),L=i(a.visitors.visitor_data.length),N=i(a.visitors.visitor_data),g=i(a.visitors.visitor_dates),U=x(()=>Object.keys(g.value)),C=x(()=>t.selectedYear?g.value[t.selectedYear]:[]),t=w({selectedYear:Y.value,selectedMonth:V.value}),u=w({file:null});function T(){t.selectedYear&&t.selectedMonth&&t.get(route("dashboard"),{preserveScroll:!0,onSuccess:()=>{f.success("Data fetched successfully!"),console.log("success")}})}function z(){u.post(route("admin.brochure.store"),{preserveScroll:!0,forceFormData:!0,onSuccess:l=>{console.log("success",l),f.success("Brochure uploaded successfully!"),b()},onError:l=>{console.error("error",l)}})}function b(){u.file=null,document.querySelector('input[type="file"]').value=""}function v(l){const[c,s]=l.split("-");return new Date(c,s-1).toLocaleString("default",{month:"long"})}return y(()=>t.selectedYear,()=>{p.value=new Date().toLocaleString("default",{month:"long"}),t.selectedMonth=""}),y([()=>t.selectedYear,()=>t.selectedMonth],()=>{T()}),(l,c)=>(n(),d(_,null,[h(o(E),{title:"Dashboard"}),h($,null,{header:k(()=>[H]),default:k(()=>[e("div",I,[e("div",K,[e("div",R,[e("h1",null,[m(" Welcome "),e("span",W,r(l.$page.props.auth.user.first_name)+"!",1)])]),e("div",X,[e("div",Z,[G,e("p",J,r(j.value),1),e("a",{class:"text-right text-xs text-blue-400 hover:underline",href:l.route("admin.blog.index")},"Visit Blogs",8,Q)]),e("div",ee,[te,e("p",se,r(P.value),1),oe]),e("div",le,[re,e("p",ie,r(F.value),1),e("a",{class:"text-right text-xs text-blue-400 hover:underline",href:l.route("admin.users.index")},"Visit Users",8,ne)])]),e("div",de,[ae,e("a",{target:"_blank",href:l.route("brochure.download"),class:"text-blue-600 hover:text-blue-800 underline mb-4 inline-block"}," Preview Brochure ",8,ce),e("form",{onSubmit:O(z,["prevent"]),class:"mt-4"},[e("div",ue,[o(u).file?(n(),d("div",_e,[e("div",fe,[e("div",pe,[ge,e("span",be,r(o(u).file.name),1)]),e("button",{disabled:o(u).processing,type:"button",onClick:b,class:"text-red-600 hover:text-red-800"}," Remove ",8,ve)])])):(n(),d("label",he,[me,e("input",{id:"dropzone-file",type:"file",class:"hidden",onInput:c[0]||(c[0]=s=>o(u).file=s.target.files[0]),accept:".pdf"},null,32)]))]),e("div",xe,[e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",disabled:!o(u).file}," Upload Brochure ",8,we)])],32)]),e("div",ye,[e("div",ke,[e("div",Me,[Be,e("p",De,[m("Total visitors this month of "),o(t).selectedMonth==""?(n(),d("span",Se,r(p.value),1)):(n(),d("span",Ye,r(v(o(t).selectedMonth)),1)),m(": "),e("span",Ve,r(L.value),1)])]),e("div",null,[je,M(e("select",{id:"year","onUpdate:modelValue":c[1]||(c[1]=s=>o(t).selectedYear=s),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[Pe,(n(!0),d(_,null,D(U.value,s=>(n(),d("option",{key:s,value:s},r(s),9,Fe))),128))],512),[[B,o(t).selectedYear]]),Le,M(e("select",{id:"month","onUpdate:modelValue":c[2]||(c[2]=s=>o(t).selectedMonth=s),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",disabled:!o(t).selectedYear},[Ue,(n(!0),d(_,null,D(C.value,s=>(n(),d("option",{key:s,value:s},r(v(s)),9,Ce))),128))],8,Ne),[[B,o(t).selectedMonth]])])]),e("section",null,[e("div",Te,[h(q,{visitorData:N.value},null,8,["visitorData"])])])])])])]),_:1})],64))}};export{Ie as default};
