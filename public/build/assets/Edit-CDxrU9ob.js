import{s as I,T as P,r as F,o as D,d as y,e as _,f as a,u as t,Z as E,i as x,g as e,k as T,p as j,h as $,t as i,v as u,L as q,F as v,m as w,x as B,j as m}from"./app-BCrYp6Y1.js";import{_ as N}from"./AuthenticatedLayout-NRxJbNl8.js";import{_ as n}from"./InputError-CKRtSV08.js";import{_ as L}from"./Toggle-DGuQaKfZ.js";import{u as M}from"./useFileSizeCheck-BABF9ofn.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-DaiI9JsI.js";import"./Dropdown-D3ZcWUrf.js";const l=g=>(j("data-v-06ac8cc7"),g=g(),$(),g),A=l(()=>e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Update Product Information",-1)),O={class:"p-4 sm:p-6 lg:p-8"},R={class:"max-w-7xl mx-auto space-y-6"},W={class:"flex justify-start"},G=l(()=>e("i",{class:"fa-solid fa-arrow-left mr-2"},null,-1)),Z=l(()=>e("span",null,"Back",-1)),H={class:"bg-white rounded-lg shadow-md p-6 space-y-6"},J={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},K=l(()=>e("label",{for:"form-name",class:"block text-sm font-medium text-gray-700 mb-1"},"Product Name",-1)),Q=l(()=>e("label",{for:"category",class:"block text-sm font-medium text-gray-700 mb-1"},"Select Category",-1)),X=l(()=>e("option",{disabled:"",selected:""},"Category",-1)),Y=["value"],ee={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},se=l(()=>e("label",{for:"prod-name",class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),te={class:"flex justify-between items-center mb-2"},re=l(()=>e("label",{class:"block text-sm font-medium text-gray-700"},[m("Image/s "),e("span",{class:"text-xs"},"(max 3 images upload)")],-1)),oe={class:"bg-green-500 px-3 py-1 rounded-lg text-white"},le=l(()=>e("label",{for:"file-upload",class:"flex items-center cursor-pointer"},[e("i",{class:"fa-solid fa-plus text-xl mr-1"}),e("span",{class:"hidden sm:inline"},"Add Images")],-1)),ae={class:"bg-gray-300 rounded-lg w-full h-40 flex items-center justify-center overflow-hidden"},de={class:"flex space-x-2"},ne=["src"],ie=["onClick"],ue=l(()=>e("i",{class:"fa-solid fa-times"},null,-1)),ce=[ue],me={class:"border-t pt-6"},pe=l(()=>e("h3",{class:"text-lg font-semibold mb-4"},"Product Specifications",-1)),fe={class:"mb-4"},ge=l(()=>e("h4",{class:"font-medium mb-2"},[m("General Information "),e("span",{class:"text-sm font-normal"},"(Fields with * are required)")],-1)),be={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},ye=l(()=>e("label",{for:"form-price",class:"block text-sm font-medium text-gray-700 mb-1"},"Current Price",-1)),_e=l(()=>e("label",{for:"form-discount",class:"block text-sm font-medium text-gray-700 mb-1"},"Datasheet(url)",-1)),he=l(()=>e("label",{for:"form-warranty",class:"block text-sm font-medium text-gray-700 mb-1"},"Warranty*",-1)),xe=l(()=>e("label",{for:"form-stock-level",class:"block text-sm font-medium text-gray-700 mb-1"},"Stock Level",-1)),ve=l(()=>e("label",{for:"form-supplier",class:"block text-sm font-medium text-gray-700 mb-1"},"Supplier*",-1)),we=l(()=>e("label",{for:"is_featured",class:"block text-sm font-medium text-gray-700 mb-1"},"Displayed",-1)),ke=l(()=>e("h4",{class:"font-medium mb-2"},[m("Technical Information "),e("span",{class:"text-sm font-normal"},"(Fields with * are required)")],-1)),Ve={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},Ue=l(()=>e("label",{for:"form-power-out",class:"block text-sm font-medium text-gray-700 mb-1"},[m("Power Out* "),e("sup",null,"in watts")],-1)),Se=l(()=>e("label",{for:"form-efficiency",class:"block text-sm font-medium text-gray-700 mb-1"},[m("Efficiency* "),e("sup",null,"%")],-1)),Ce=l(()=>e("label",{for:"form-voltage",class:"block text-sm font-medium text-gray-700 mb-1"},"Voltage*",-1)),Ie=l(()=>e("label",{for:"form-dimension",class:"block text-sm font-medium text-gray-700 mb-1"},"Dimensions*",-1)),Pe=l(()=>e("label",{for:"form-weight",class:"block text-sm font-medium text-gray-700 mb-1"},[m("Weight* "),e("sup",null,"in kilogram")],-1)),Fe=l(()=>e("label",{for:"form-current",class:"block text-sm font-medium text-gray-700 mb-1"},[m("Current* "),e("sup",null,"in ampere")],-1)),De=l(()=>e("label",{for:"form-temp_coeff",class:"block text-sm font-medium text-gray-700 mb-1"},[m("Temperature Coefficient* "),e("sup",null,"in Â°C")],-1)),Ee=l(()=>e("label",{for:"form-type",class:"block text-sm font-medium text-gray-700 mb-1"},"Type*",-1)),Te=l(()=>e("label",{for:"form-certification",class:"block text-sm font-medium text-gray-700 mb-1"},"Certification*",-1)),je={__name:"Edit",props:{categories:{type:Array,required:!0},product:{type:Object,required:!0}},setup(g){const f=I(),{checkFileSize:k}=M(1.5),d=g,s=P({name:d.product.name,category_id:d.product.category_id,power_out:d.product.power_out,efficiency:d.product.efficiency,dimension:d.product.dimension,weight:d.product.weight,type:d.product.type,voltage:d.product.voltage,current:d.product.current,temp_coeff:d.product.temp_coeff,price:d.product.price,discount:d.product.discount,warranty:d.product.warranty,stock_level:d.product.stock_level,supplier:d.product.supplier,certification:d.product.certification,description:d.product.description,img_path:[],datasheet:d.product.datasheet,is_displayed:d.product.is_displayed}),b=F(d.product.images.map(c=>({id:c.id,url:`/storage/${c.images}`})));function V(c){const o=c.target.files;for(let r=0;r<o.length;r++){const p=o[r];if(k(p)){const h=new FileReader;h.onload=C=>{b.value.push({id:null,url:C.target.result})},h.readAsDataURL(p),s.img_path.push(p)}else f.error(`File "${p.name}" exceeds the 1.5 MB size limit.`)}}function U(c){const o=b.value[c];o.id?s.delete(route("admin.products.deleteImage",{imageId:o.id}),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{b.value.splice(c,1),f.success("Image deleted successfully.")},onError:()=>{f.error("Failed to delete image. Please try again.")}}):(b.value.splice(c,1),s.img_path.splice(c,1),f.info("New image removed."))}function S(){s.post(route("admin.products.update",d.product.id),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{f.success("Product updated successfully!"),s.clearErrors()},onError:c=>{f.error("Failed to update product. Please check the form and try again."),console.error(c)}})}return D(()=>{s.clearErrors()}),(c,o)=>(y(),_(v,null,[a(t(E),{title:"Update Product"}),a(N,null,{header:x(()=>[A]),default:x(()=>[e("div",O,[e("div",R,[e("div",W,[a(t(T),{class:"bg-main-400 px-4 py-2 rounded-md text-white hover:bg-main-500",href:c.route("admin.products.index")},{default:x(()=>[G,Z]),_:1},8,["href"])]),e("div",H,[e("div",J,[e("div",null,[K,i(e("input",{id:"form-name",class:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":o[0]||(o[0]=r=>t(s).name=r),type:"text",required:""},null,512),[[u,t(s).name]]),a(n,{class:"mt-2",message:t(s).errors.name},null,8,["message"])]),e("div",null,[Q,i(e("select",{id:"category",class:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":o[1]||(o[1]=r=>t(s).category_id=r)},[X,(y(!0),_(v,null,w(d.categories,r=>(y(),_("option",{key:r.id,value:r.id},B(r.name),9,Y))),128))],512),[[q,t(s).category_id]]),a(n,{class:"mt-2",message:t(s).errors.category_id},null,8,["message"])])]),e("div",ee,[e("div",null,[se,i(e("textarea",{class:"w-full h-40 p-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":o[2]||(o[2]=r=>t(s).description=r)},null,512),[[u,t(s).description]]),a(n,{class:"mt-2",message:t(s).errors.description},null,8,["message"])]),e("div",null,[e("div",te,[re,a(n,{class:"mt-2",message:t(s).errors.img_path},null,8,["message"]),e("div",oe,[e("input",{type:"file",multiple:"",onChange:V,class:"hidden",id:"file-upload"},null,32),le])]),e("div",ae,[e("div",de,[(y(!0),_(v,null,w(b.value,(r,p)=>(y(),_("div",{key:p,class:"relative"},[e("img",{src:r.url,class:"w-24 h-24 object-cover rounded-lg"},null,8,ne),e("button",{onClick:h=>U(p),class:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1 transform translate-x-1/2 -translate-y-1/2"},ce,8,ie)]))),128))])])])]),e("div",me,[pe,e("div",fe,[ge,e("div",be,[e("div",null,[ye,i(e("input",{id:"form-price",class:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":o[3]||(o[3]=r=>t(s).price=r),type:"number"},null,512),[[u,t(s).price]]),a(n,{class:"mt-1",message:t(s).errors.price},null,8,["message"])]),e("div",null,[_e,i(e("input",{id:"form-discount",class:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":o[4]||(o[4]=r=>t(s).datasheet=r),type:"text"},null,512),[[u,t(s).datasheet]]),a(n,{class:"mt-1",message:t(s).errors.datasheet},null,8,["message"])]),e("div",null,[he,i(e("input",{id:"form-warranty",class:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":o[5]||(o[5]=r=>t(s).warranty=r),type:"text"},null,512),[[u,t(s).warranty]]),a(n,{class:"mt-1",message:t(s).errors.warranty},null,8,["message"])]),e("div",null,[xe,i(e("input",{id:"form-stock-level",class:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":o[6]||(o[6]=r=>t(s).stock_level=r),type:"number"},null,512),[[u,t(s).stock_level]]),a(n,{class:"mt-1",message:t(s).errors.stock_level},null,8,["message"])]),e("div",null,[ve,i(e("input",{id:"form-supplier",class:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":o[7]||(o[7]=r=>t(s).supplier=r),type:"text"},null,512),[[u,t(s).supplier]]),a(n,{class:"mt-1",message:t(s).errors.supplier},null,8,["message"])]),e("div",null,[we,a(L,{modelValue:t(s).is_displayed,"onUpdate:modelValue":o[8]||(o[8]=r=>t(s).is_displayed=r),class:"mt-1"},null,8,["modelValue"]),a(n,{class:"mt-1",message:t(s).errors.is_displayed},null,8,["message"])])])]),e("div",null,[ke,e("div",Ve,[e("div",null,[Ue,i(e("input",{id:"form-power-out",class:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":o[9]||(o[9]=r=>t(s).power_out=r),type:"number"},null,512),[[u,t(s).power_out]]),a(n,{class:"mt-1",message:t(s).errors.power_out},null,8,["message"])]),e("div",null,[Se,i(e("input",{id:"form-efficiency",class:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":o[10]||(o[10]=r=>t(s).efficiency=r),type:"text"},null,512),[[u,t(s).efficiency]]),a(n,{class:"mt-1",message:t(s).errors.efficiency},null,8,["message"])]),e("div",null,[Ce,i(e("input",{id:"form-voltage",class:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":o[11]||(o[11]=r=>t(s).voltage=r),type:"number"},null,512),[[u,t(s).voltage]]),a(n,{class:"mt-1",message:t(s).errors.voltage},null,8,["message"])]),e("div",null,[Ie,i(e("input",{id:"form-dimension",class:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":o[12]||(o[12]=r=>t(s).dimension=r),type:"text"},null,512),[[u,t(s).dimension]]),a(n,{class:"mt-1",message:t(s).errors.dimension},null,8,["message"])]),e("div",null,[Pe,i(e("input",{id:"form-weight",class:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":o[13]||(o[13]=r=>t(s).weight=r),type:"number"},null,512),[[u,t(s).weight]]),a(n,{class:"mt-1",message:t(s).errors.weight},null,8,["message"])]),e("div",null,[Fe,i(e("input",{id:"form-current",class:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":o[14]||(o[14]=r=>t(s).current=r),type:"number"},null,512),[[u,t(s).current]]),a(n,{class:"mt-1",message:t(s).errors.current},null,8,["message"])]),e("div",null,[De,i(e("input",{id:"form-temp_coeff",class:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":o[15]||(o[15]=r=>t(s).temp_coeff=r),type:"text"},null,512),[[u,t(s).temp_coeff]]),a(n,{class:"mt-1",message:t(s).errors.temp_coeff},null,8,["message"])]),e("div",null,[Ee,i(e("input",{id:"form-type",class:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":o[16]||(o[16]=r=>t(s).type=r),type:"text"},null,512),[[u,t(s).type]]),a(n,{class:"mt-1",message:t(s).errors.type},null,8,["message"])]),e("div",null,[Te,i(e("input",{id:"form-certification",class:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent","onUpdate:modelValue":o[17]||(o[17]=r=>t(s).certification=r),type:"text"},null,512),[[u,t(s).certification]]),a(n,{class:"mt-1",message:t(s).errors.certification},null,8,["message"])])])])]),e("div",{class:"flex justify-end mt-6"},[e("button",{type:"submit",class:"bg-green-500 px-4 py-2 text-white rounded-lg hover:bg-green-600",onClick:S}," Update Product ")])])])])]),_:1})],64))}},Oe=z(je,[["__scopeId","data-v-06ac8cc7"]]);export{Oe as default};
